!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["prop-types","react"],r):"object"==typeof exports?exports.C2Table=r(require("prop-types"),require("react")):e.C2Table=r(e.PropTypes,e.React)}(window,(function(e,r){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=2)}([function(r,t){r.exports=e},function(e,t){e.exports=r},function(e,r,t){"use strict";t.r(r),t.d(r,"Table",(function(){return G})),t.d(r,"Column",(function(){return S})),t.d(r,"ColumnGroup",(function(){return D})),t.d(r,"RowContext",(function(){return R}));var n=t(1),o=t.n(n),a=t(0),s=t.n(a),i=["rowId","row","index","expanded","setExpanded","children"];function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){O(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function p(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function f(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,r,t){return r&&f(e.prototype,r),t&&f(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&y(e,r)}function y(e,r){return(y=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function C(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=g(e);if(r){var o=g(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return b(this,t)}}function b(e,r){if(r&&("object"===u(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var x=function(){},w=s.a.oneOfType([s.a.string,s.a.func]),E=s.a.oneOfType([s.a.string,s.a.object]),k=s.a.oneOfType([s.a.string,s.a.object,s.a.func]),S=function(e){m(t,e);var r=C(t);function t(){return d(this,t),r.apply(this,arguments)}return h(t,[{key:"render",value:function(){throw new Error("<Column> is not meant to be rendered.")}}]),t}(n.Component);O(S,"_colType","c2-table-column"),O(S,"propTypes",{id:s.a.string.isRequired,header:s.a.oneOfType([s.a.string,s.a.func]),headerClassName:k,cellClassName:s.a.any,footerClassName:E,footer:s.a.func,cell:w,orderValue:w,sortOnHeaderClick:s.a.bool,sort:s.a.func}),O(S,"defaultProps",{sortOnHeaderClick:!0});var D=function(e){m(t,e);var r=C(t);function t(){return d(this,t),r.apply(this,arguments)}return h(t,[{key:"render",value:function(){throw new Error("<ColumnGroup> is not meant to be rendered.")}}]),t}(n.Component);function N(e){var r;return(null===(r=e=e||{})||void 0===r?void 0:r.type)===D}function I(e){var r;return(null===(r=e=e||{})||void 0===r?void 0:r.type)===S}function P(e){return o.a.Children.toArray(e).filter((function(e){return!!e}))}O(D,"_colType","c2-table-column-group"),O(D,"propTypes",{id:s.a.string.isRequired,children:s.a.arrayOf((function(e,r){if(e[r]&&!I(e[r]))throw new Error("<ColumnGroup> can only have <Column>'s as children. ")})).isRequired,headerClassName:k,sortOnHeaderClick:s.a.bool,sort:s.a.func}),O(D,"defaultProps",{sortOnHeaderClick:!0});var j=function(e,r){var t;o.a.Children.forEach(e[r],(function(e){return N(e)||I(e)||(t=new Error("Invalid Table children.")),t}))},R=o.a.createContext({row:null,index:null,rowId:null,expanded:null,expand:function(){},collapse:function(){},toggleExpanded:function(){}}),T=function(e){m(t,e);var r=C(t);function t(){var e;d(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return O(v(e=r.call.apply(r,[this].concat(o))),"onHeaderClick",(function(){var r="asc"!==e.props.orderDir&&e.props.orderDir?"asc":"desc";e.props.setOrderColumn(e.props.id),e.props.setOrderDir(r),e.props.onSort(e.props.id,r)})),e}return h(t,[{key:"headerContent",value:function(){switch(u(this.props.header)){case"function":return this.props.header(this.getSortSymbol(),this.onHeaderClick);default:return o.a.createElement("span",null,this.props.header||this.props.id," ",this.getSortSymbol())}}},{key:"isCurrentSortColumn",value:function(){return this.props.orderColumn===this.props.id}},{key:"getSortSymbol",value:function(e){var r=this.props,t=r.sortDescIcon,n=r.sortAscIcon;return this.isCurrentSortColumn(e)?"asc"===this.props.orderDir?o.a.createElement("span",null,n||"↑"):o.a.createElement("span",null,t||"↓"):null}},{key:"getClickableClass",value:function(){return!1===this.props.sortOnHeaderClick?null:this.props.clickableClass||"clickable"}},{key:"renderFirstRowHeader",value:function(){var e=this.props.children?this.props.children.length:1;return o.a.createElement("th",{colSpan:e||1,rowSpan:this.props.hasGroups&&1===e?2:1,onClick:!1===this.props.sortOnHeaderClick?x:this.onHeaderClick,className:"".concat(this.props.className||""," ").concat(this.getClickableClass()).trim(),"data-testid":"header-".concat(this.props.id)},this.headerContent())}},{key:"renderSecondRowHeader",value:function(){return o.a.createElement("th",{key:this.props.id,onClick:this.onHeaderClick,className:"".concat(this.props.className||""," ").concat(this.getClickableClass()).trim()},this.headerContent())}},{key:"render",value:function(){return this.props.isFirstRow?this.renderFirstRowHeader():this.renderSecondRowHeader()}}]),t}(n.Component);O(T,"propTypes",{id:s.a.string.isRequired,orderColumn:s.a.string,orderDir:s.a.string,setOrderColumn:s.a.func.isRequired,setOrderDir:s.a.func.isRequired,sortOnHeaderClick:s.a.bool,clickableClass:s.a.string,children:j,hasGroups:s.a.bool,className:E,isFirstRow:s.a.bool,header:s.a.oneOfType([s.a.string,s.a.func]),sortDescIcon:s.a.any,sortAscIcon:s.a.any,onSort:s.a.func}),O(T,"defaultProps",{onSort:function(){}});var H=function(e){m(t,e);var r=C(t);function t(){return d(this,t),r.apply(this,arguments)}return h(t,[{key:"hasGroups",value:function(){var e=!1;return o.a.Children.forEach(this.props.children,(function(r){N(r)&&(e=!0)})),e}},{key:"renderFirstRow",value:function(){var e=this,r=this.hasGroups();return o.a.createElement("tr",null,this.props.onExpand?o.a.createElement("th",{rowSpan:r?2:1,className:this.props.expandClassName}):null,P(this.props.children).map((function(t){return o.a.createElement(T,{key:t.props.id,orderColumn:e.props.orderColumn,orderDir:e.props.orderDir,setOrderColumn:e.props.setOrderColumn,setOrderDir:e.props.setOrderDir,clickableClass:e.props.clickableClass,onSort:e.props.onSort,sortDescIcon:e.props.sortDescIcon,sortAscIcon:e.props.sortAscIcon,id:t.props.id,header:t.props.header,className:t.props.headerClassName,sortOnHeaderClick:t.props.sortOnHeaderClick,hasGroups:r,isFirstRow:!0},t.props.children)})))}},{key:"renderSecondRow",value:function(){var e=this;return o.a.createElement("tr",null,P(this.props.children).map((function(r){return N(r)?P(r.props.children).map((function(r){return o.a.createElement(T,{key:r.props.id,orderColumn:e.props.orderColumn,orderDir:e.props.orderDir,setOrderColumn:e.props.setOrderColumn,setOrderDir:e.props.setOrderDir,clickableClass:e.props.clickableClass,onSort:e.props.onSort,sortDescIcon:e.props.sortDescIcon,sortAscIcon:e.props.sortAscIcon,id:r.props.id,header:r.props.header,className:r.props.headerClassName,sortOnHeaderClick:r.props.sortOnHeaderClick,children:r.props.children})})):null})))}},{key:"render",value:function(){return o.a.createElement("thead",null,this.renderFirstRow(),this.hasGroups()?this.renderSecondRow():null)}}]),t}(n.Component);function q(e){var r=[];return P(e).forEach((function(e){N(e)?r=r.concat(q(e.props.children)):r.push(e)})),r.filter((function(e){return!!e}))}function _(e){var r=e.rowId,t=e.row,n=e.index,a=e.expanded,s=e.setExpanded,l=e.children,c=p(e,i),u=o.a.useCallback((function(){return s(r,!0)}),[r,s]),d=o.a.useCallback((function(){return s(r,!1)}),[r,s]),f=o.a.useMemo((function(){return{rowId:r,row:t,index:n,expanded:a,toggleExpanded:function(){return s(r,!a)},expand:u,collapse:d}}),[r,t,n,a,s,u,d]);return o.a.createElement(R.Provider,{value:f},o.a.createElement("tr",c,l))}O(H,"propTypes",{children:j,onExpand:s.a.func,expandClassName:E,orderColumn:s.a.string,orderDir:s.a.string,setOrderColumn:s.a.func.isRequired,setOrderDir:s.a.func.isRequired,clickableClass:s.a.string,sortDescIcon:s.a.any,sortAscIcon:s.a.any,onSort:s.a.func});var A=function(e){m(t,e);var r=C(t);function t(e){var n;d(this,t),O(v(n=r.call(this,e)),"setExpanded",(function(e,r){n.setState({expanded:c(c({},n.state.expanded),{},O({},e,r))})})),O(v(n),"getRowClassName",(function(e,r){var t=n.props.rowClassName;return"string"==typeof t?t:"function"==typeof t?t(e,r):""}));var o={};return e.expanded&&e.expanded.forEach((function(e){o[e]=!0})),n.state={expanded:o},n}return h(t,[{key:"cellClassName",value:function(e,r,t){return"function"==typeof e.props.cellClassName?e.props.cellClassName(r,t):e.props.cellClassName}},{key:"expandCell",value:function(e,r){var t=this,n=this.props,a=n.rowId,s=n.expandClassName,i=n.clickableClass,l=n.collapsedIcon,c=n.expandedIcon,p=F(a,e,r);return o.a.createElement("td",{className:"".concat(s||""," ").concat(i||"clickable").trim(),onClick:function(){var e=t.state.expanded;e[p]=!e[p],t.setState({expanded:e})}},this.state.expanded[p]?c||"-":l||"+")}},{key:"render",value:function(){var e=this,r=this.props,t=r.children,n=r.rowId,a=r.onExpand,s=r.onEmpty,i=r.isFullLength,l=r.fullLengthCell,c=this.props.id,p=q(t),d=this.props.data||[],f=[];return d.forEach((function(r,t){var s=e.getRowClassName(r,t),d=F(n,r,t),h="".concat(c,"-").concat(d),m=e.state.expanded[d]||!1;i&&i(r,t)?f.push(o.a.createElement(_,{key:"tr-".concat(h),id:"tr-".concat(h),rowId:d,row:r,index:t,expanded:m,setExpanded:e.setExpanded,className:s},o.a.createElement("td",{colSpan:p.length+(a?1:0)},l(r,t)))):f.push(o.a.createElement(_,{key:"tr-".concat(h),id:"tr-".concat(h),rowId:d,row:r,index:t,expanded:m,setExpanded:e.setExpanded,className:s},a?e.expandCell(r,t):null,p.map((function(n){return o.a.createElement("td",{key:"td-".concat(h,"-").concat(n.props.id),className:e.cellClassName(n,r,t)},function(e,r,t){switch(u(e.props.cell)){case"function":return e.props.cell(r,t);default:return r[e.props.cell||e.props.id]}}(n,r,t))})))),a&&e.state.expanded[d]&&f.push(o.a.createElement(_,{key:"tr-".concat(h,"-expanded"),rowId:d,row:r,index:t,expanded:m,setExpanded:e.setExpanded,className:"".concat(s,"-expanded")},o.a.createElement("td",{colSpan:p.length+1},o.a.createElement(a,{row:r}))))})),0===f.length&&f.push(o.a.createElement("tr",{key:"tr-empty"},o.a.createElement("td",{colSpan:p.length+(a?1:0)},s||o.a.createElement("div",{className:"text-center"},"No data...")))),o.a.createElement("tbody",null,f)}}]),t}(n.Component);function F(e,r,t){switch(u(e)){case"function":return e(r,t);default:return r[e]}}function L(e,r){switch(u(e.props.orderValue)){case"function":return e.props.orderValue(r);default:return r[e.props.orderValue||e.props.id]}}O(A,"propTypes",{rowId:w.isRequired,expandClassName:E,clickableClass:s.a.string,children:j,id:s.a.string.isRequired,onExpand:s.a.func,data:s.a.array.isRequired,expandedIcon:s.a.any,collapsedIcon:s.a.any,expanded:s.a.array,onEmpty:s.a.node,rowClassName:w,isFullLength:s.a.func,fullLengthCell:s.a.func});var G=function(e){m(t,e);var r=C(t);function t(){var e;d(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return O(v(e=r.call.apply(r,[this].concat(o))),"state",{}),O(v(e),"setOrderColumn",(function(r){e.props.sortEnabled&&e.setState({orderColumn:r})})),O(v(e),"setOrderDir",(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc";e.props.sortEnabled&&e.setState({orderDir:r})})),O(v(e),"getPagedData",(function(){var r=e.getData();if(void 0===e.props.page||void 0===e.props.rowsPerPage)return r;var t=e.props.page*e.props.rowsPerPage,n=t+e.props.rowsPerPage;return r.slice(t,n)})),e}return h(t,[{key:"componentDidMount",value:function(){this.props.defaultOrderColumn&&this.setOrderColumn(this.props.defaultOrderColumn),this.setOrderDir(this.props.defaultOrderDir)}},{key:"getColumns",value:function(){return q(this.props.children)}},{key:"getData",value:function(){var e,r,t=this.state,n=t.orderColumn,o=t.orderDir,a=this.props.data,s=(e=this.props.children,r=n,P(e).find((function(e){return e.props.id===r}))||q(e).find((function(e){return e.props.id===r})));return s?"function"==typeof s.props.sort?s.props.sort(a,o):(a=a.map((function(e){return{row:e,orderValue:L(s,e)}}))).sort((function(e,r){var t="string"==typeof e.orderValue?"":0;if(e=e.orderValue||t,r=r.orderValue||t,"asc"===o){if(e>r)return 1;if(e<r)return-1}else{if(e<r)return 1;if(e>r)return-1}return 0})).map((function(e){return e.row})):a}},{key:"render",value:function(){var e=this.getData(),r=this.getPagedData();return o.a.createElement("table",{className:this.props.className,id:this.props.id,style:this.props.style},o.a.createElement(H,{id:this.props.id,orderColumn:this.state.orderColumn,orderDir:this.state.orderDir,setOrderColumn:this.setOrderColumn,setOrderDir:this.setOrderDir,children:this.props.children,onExpand:this.props.onExpand,expandClassName:this.props.expandClassName,clickableClass:this.props.sortEnabled?this.props.clickableClass:"c2-table-disabled",sortDescIcon:this.props.sortDescIcon,sortAscIcon:this.props.sortAscIcon,onSort:this.props.onSort}),o.a.createElement(A,{id:this.props.id,rowId:this.props.rowId,expandClassName:this.props.expandClassName,clickableClass:this.props.clickableClass,children:this.props.children,expandedIcon:this.props.expandedIcon,collapsedIcon:this.props.collapsedIcon,onExpand:this.props.onExpand,expanded:this.props.expanded,onEmpty:this.props.onEmpty,rowClassName:this.props.rowClassName,isFullLength:this.props.isFullLength,fullLengthCell:this.props.fullLengthCell,data:r}),o.a.createElement(V,{children:this.props.children,onExpand:this.props.onExpand,data:e}))}}]),t}(n.Component);O(G,"propTypes",{id:s.a.string.isRequired,rowId:s.a.oneOfType([s.a.string,s.a.func]).isRequired,data:s.a.array.isRequired,defaultOrderColumn:s.a.string,defaultOrderDir:s.a.oneOf(["asc","desc"]),sortEnabled:s.a.bool,children:j,style:s.a.object,className:E,rowClassName:w,expandClassName:E,clickableClass:s.a.string,page:s.a.number,rowsPerPage:s.a.number,onExpand:s.a.func,expanded:s.a.array,expandedIcon:s.a.any,collapsedIcon:s.a.any,onEmpty:s.a.node,sortDescIcon:s.a.any,sortAscIcon:s.a.any,onSort:s.a.func,isFullLength:s.a.func,fullLengthCell:s.a.func}),O(G,"defaultProps",{sortEnabled:!0});var V=function(e){m(t,e);var r=C(t);function t(){return d(this,t),r.apply(this,arguments)}return h(t,[{key:"render",value:function(){var e=this;return this.props.children&&q(this.props.children).reduce((function(e,r){return e||r.props.footer}),!1)&&this.props.data.length?o.a.createElement("tfoot",null,o.a.createElement("tr",null,this.props.onExpand?o.a.createElement("td",null):null,q(this.props.children).map((function(r){return o.a.createElement("td",{key:r.props.id,className:r.props.footerClassName||""},r.props.footer?r.props.footer(e.props.data):null)})))):null}}]),t}(n.Component);O(V,"defaultProps",{data:[]}),O(V,"propTypes",{children:s.a.node,onExpand:s.a.func,data:s.a.array})}])}));